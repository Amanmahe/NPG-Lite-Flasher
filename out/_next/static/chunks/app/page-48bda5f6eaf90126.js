(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1257:(e,s,r)=>{Promise.resolve().then(r.bind(r,3792))},3792:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(5155),a=r(2115),l=r(2489),i=r(6306),c=r(3286),n=r(6517),d=r(3314),o=r(646),m=r(5339),x=r(4416),h=r(3904),b=r(2138);function u(){let[e,s]=(0,a.useState)([]),[r,u]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),[f,w]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[S,F]=(0,a.useState)(""),[k,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setInterval(()=>{C()},3e3);return C(),()=>clearInterval(e)},[]);let C=async()=>{E(!0);try{l.I8.invoke("list_serial_ports").then(s)}catch(e){console.error("Error listing ports:",e)}finally{E(!1)}},A=e=>{N(e),e&&(w(!0),F(""),p(""))},L=async()=>{if(!r){p("Error: Please select a port first."),F("error");return}let e="";switch(j){case"BLE":e="/NPG-LITE-BLE.ino.bin";break;case"Serial":e="/NPG-LITE.ino.bin";break;case"WiFi":e="/NPG-LITE-WiFi.ino.bin"}v(!0),p("Flashing firmware, please wait..."),F("");try{let s=await l.I8.invoke("flash_firmware",{portname:r,file:e});p("Success: ".concat(String(s))),F("success")}catch(e){console.error("Flash failed:",e),p("Error: ".concat(String(e))),F("error")}finally{v(!1)}},_=()=>{w(!1),N(""),p(""),F("")},P=e=>{switch(e){case"BLE":return(0,t.jsx)(i.A,{className:"mr-2"});case"Serial":return(0,t.jsx)(c.A,{className:"mr-2"});case"WiFi":return(0,t.jsx)(n.A,{className:"mr-2"});default:return(0,t.jsx)(d.A,{className:"mr-2"})}};return(0,t.jsx)("div",{className:"min-h-screen bg-[#000409]",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,t.jsxs)("header",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white-900",children:"NPG-Lite-C6 Firmware Flasher"}),(0,t.jsx)("p",{className:"text-white-600 mt-2",children:"Select a firmware type to begin flashing your device"})]}),(0,t.jsxs)("div",{className:"bg-[#0C1117] rounded-lg shadow-md p-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Select Firmware Type"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{type:"BLE",title:"Bluetooth LE",description:"For wireless Bluetooth connectivity"},{type:"Serial",title:"Serial",description:"For wired USB serial connections"},{type:"WiFi",title:"WiFi",description:"For wireless network connectivity"}].map(e=>(0,t.jsxs)("div",{onClick:()=>A(e.type),className:"border rounded-lg p-4 cursor-pointer transition-all duration-200 hover:shadow-md ".concat(j===e.type?"border-blue-500 ring-2 ring-blue-200":"border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex items-center",children:[P(e.type),(0,t.jsx)("span",{className:"font-medium",children:e.title})]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mt-2",children:e.description})]},e.type))})]}),f&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,t.jsxs)("div",{className:"border-b p-4 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex text-black items-center",children:[P(j),(0,t.jsxs)("h2",{className:"text-xl font-semibold",children:["Flash ",j," Firmware"]})]}),(0,t.jsx)("button",{onClick:_,className:"text-gray-500 hover:text-gray-700",children:(0,t.jsx)(x.A,{className:"h-5 w-5"})})]}),(0,t.jsxs)("div",{className:"p-6 text-black",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Serial Port"}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("select",{onChange:e=>u(e.target.value),value:r,className:"flex-grow border rounded-l-md p-2 focus:ring-blue-500 focus:border-blue-500",disabled:y,children:[(0,t.jsx)("option",{value:"",children:"-- Select Port --"}),e.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsx)("button",{onClick:C,className:"bg-gray-100 border border-l-0 rounded-r-md px-3 hover:bg-gray-200",disabled:y||k,children:(0,t.jsx)(h.A,{className:"h-5 w-5 ".concat(k?"animate-spin":"")})})]})]}),g&&(0,t.jsx)("div",{className:"border rounded-md p-3 mt-4 ".concat("success"===S?"bg-green-50 border-green-200 text-green-800":"error"===S?"bg-red-50 border-red-200 text-red-800":"bg-gray-50 border-gray-200 text-gray-800"),children:(0,t.jsxs)("div",{className:"flex items-start",children:["success"===S?(0,t.jsx)(o.A,{className:"h-5 w-5 text-green-500"}):"error"===S?(0,t.jsx)(m.A,{className:"h-5 w-5 text-red-500"}):null,(0,t.jsx)("pre",{className:"ml-2 text-sm whitespace-pre-wrap font-mono",children:g})]})}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,t.jsx)("button",{onClick:_,className:"px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50",disabled:y,children:"Cancel"}),(0,t.jsx)("button",{onClick:L,disabled:y||!r,className:"px-4 py-2 rounded-md flex items-center ".concat(r?"bg-blue-600 hover:bg-blue-700":"bg-blue-300 cursor-not-allowed"," text-white"),children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"animate-spin h-4 w-4 mr-2"}),"Flashing..."]}):(0,t.jsxs)(t.Fragment,{children:["Flash ",(0,t.jsx)(b.A,{className:"ml-2 h-4 w-4"})]})})]})]})]})})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[416,441,684,358],()=>s(1257)),_N_E=e.O()}]);